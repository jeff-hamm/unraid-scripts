# Mover Configuration Analysis
**Date:** December 28, 2025

## Current Global Settings
- `movenow="yes"` - Mover runs continuously
- `synchronizeCache="yes"` - Copies files from pool → array (keeps on both)
- `resynchronizeCache="yes"` - Re-syncs all files periodically
- `age="yes"` - Age-based moving enabled

## Current Situation
Mover has been running for **8+ hours** synchronizing 715,941 files (628,433 remaining).
Currently processing Immich thumbnails which are regenerable cache files.

## Share Analysis

### ✗ Jumpdrive Share (1.8TB total)
**Current:** `shareUseCache="yes"` + global sync enabled (NO OVERRIDE)
**Issue:** Synchronizing ALL files including:
- **27GB of Immich thumbnails** (178,792 files) - REGENERABLE ❌
- **246GB of Immich encoded videos** - REGENERABLE (transcodes) ❌
- 818GB of photo imports
- 79GB of user files

**Problem:** First-time sync copying all 178K thumbnail files to array
**Impact:** Multi-day operation, wasted array space, unnecessary I/O

### ✗ Media Share (210GB)
**Current:** `shareUseCache="yes"` + global sync enabled (NO OVERRIDE)
**Contains:** Downloaded media in staging area
**Issue:** Download staging being synchronized unnecessarily

### ✓ Appdata Share (19GB)
**Current:** `shareUseCache="prefer"` with override
**Override:** `fillupThreshold="95"`, no explicit sync setting (uses global=yes)
**Status:** Database files being synchronized (acceptable for backup)

### ✓ Backups Share
**Current:** `shareUseCache="no"` 
**Override:** `synchronizeCache="no"` ✓ CORRECT
**Status:** Properly configured

## Identified Cache/Regenerable Data

1. **Immich thumbnails** `/jumpdrive/photos/thumbs/` (27GB, 178K files)
   - Generated by Immich on demand
   - Can be regenerated if lost
   - Should stay pool-only for performance
   - **Currently being synced** ❌

2. **Immich encoded videos** `/jumpdrive/photos/encoded-video/` (246GB)
   - Transcoded videos for web playback
   - Can be regenerated by Immich
   - Should stay pool-only

3. **Download staging** `/media/downloads/` (210GB)
   - Temporary download location
   - Gets moved to final location by *arr apps
   - Synchronizing is wasteful

## Recommendations

### Immediate Actions
1. **Let current sync complete** - It's a one-time cost (never synced before: epoch date 1969)
2. **Create jumpdrive share override** - Prevent future syncs of cache data
3. **Create media share override** - Disable sync for download staging

### Configuration Changes Needed

#### Jumpdrive Share Override
Create: `/boot/config/plugins/ca.mover.tuning/shareOverrideConfig/jumpdrive.cfg`
```
moverOverride="yes"
synchronizeCache="no"
```

#### Media Share Override
Create: `/boot/config/plugins/ca.mover.tuning/shareOverrideConfig/media.cfg`
```
moverOverride="yes"
synchronizeCache="no"
```

### Alternative: More Granular Control
Instead of disabling all sync, could:
- Keep sync enabled for important data
- Use path exclusions or size filters
- Split Immich cache into separate share with `useCache="only"`

### Long-term Considerations
- Consider setting `movenow="no"` and run mover on schedule (e.g., daily at 3am)
- Review if 246GB of encoded video cache is needed vs regenerating on demand
- Monitor pool space usage

## Space Savings Estimate
By disabling sync for cache data:
- **Array space saved:** ~273GB (thumbs + encoded video)
- **Future mover time:** Eliminate daily sync of regenerable data
- **I/O reduction:** Massive decrease in small file operations
- **One-time cost:** Current sync will complete, but won't repeat

## References
- Updated copilot-instructions.md with mover principles
- Backups share already configured correctly as template
